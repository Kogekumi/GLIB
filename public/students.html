<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <title>GLIB - Students</title>

        <link href="stylesheets/style.css" rel="stylesheets" />
         
    </head>

    <body>
        <form action="" method="post" enctype="text/plain" id="formStudent">
            <fieldset>
                <br/>
                <table>
                    <tr>
                        <td>Full Name: (*) </td>
                        <td><input type="text" name="fullName" id="fullName" maxlength="50" size="50" required /></td>
                    </tr>
                    <tr>
                        <td>E-mail: (*) </td>
                        <td><input type="email" name="email" id="email" maxlength="100" size="50" placeholder="someone@somewhere.com" /></td>
                    </tr>
                    <tr>
                        <td colspan="2">
                            <input type="submit" value="Submit" id="submit" />&nbsp;
                            <input type="reset" value="Cancel" id="cancel" />
                        </td>
                    </tr>
                    <tr>
                        <td colspan="2"><br />(*) Required fields<br /></td>
                    </tr>
                </table>
            </fieldset>
        </form>
        <div id="result">&nbsp;</div>
    </body>
</html>

<script>

let form = document.getElementById('formStudent');
let nameInput = document.getElementById('fullName');
let emailInput = document.getElementById('email');

form.addEventListener('submit', function(e) {
    var xmlhttp = new XMLHttpRequest();   // new HttpRequest instance 
    
    xmlhttp.onreadystatechange = function() {
        if(this.readyState==4 && this.status==200) {
            document.getElementById("result").innerHTML = xmlhttp.responseText;
            console.log(xmlhttp.responseText);
        } else {
            console.log("aaa");
        }
    }


    xmlhttp.open("POST", "/students");
    xmlhttp.setRequestHeader("Content-Type", "application/json");
    xmlhttp.send(JSON.stringify({"nameStudent": nameInput.value , "emailStudent": emailInput.value}));


    

    e.preventDefault();
});
</script>
